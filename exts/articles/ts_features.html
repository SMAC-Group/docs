<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Experimental Time Series Features &bull; exts</title><!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">exts</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/ts_features.html">Time Series Features</a>
</li>
<li>
  <a href="../articles/sample_analyses.html">Sample Analyses</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Experimental Time Series Features</h1>
                        <h4 class="author">JJB</h4>
            
            <h4 class="date">2016-11-05</h4>
          </div>

    
    
<div class="contents">
<div id="introduction" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#introduction" class="anchor"> </a></body></html>Introduction</h1>
<p>The package as it presently stands contains functions that are being used within Fall 2016 courses at the University of Illinois at Urbana-Champaign (UIUC). Specifically, students are using these functions within STAT 578 (Special Topic): Time Series Forecasting and STAT 429: Time Series Analysis. Presently, the functions are meant to provide students with the ability to interact with time series data. All functions will eventually end up either moving to a different package (perhaps <code>gmwm</code>) or may end up being removed.</p>
<div id="pipable-time-series-functions" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#pipable-time-series-functions" class="anchor"> </a></body></html>Pipable Time Series Functions</h2>
<p>Outside of being used as an educational and practical tool, the package also serves to provide tenets of pipable data within a time series context. Thus, the package is primarily designed with the notion of the piping operator (<code>%&gt;%</code>) fully in play as well as other <em>R</em> related tools like <code>dplyr</code> and <code>tidyr</code>. As this package is experimental, the implementations may shift significantly.</p>
</div>
</div>
<div id="installation-instructions" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#installation-instructions" class="anchor"> </a></body></html>Installation Instructions</h1>
<p>Presently, the package can only be obtained through GitHub. Plans for a CRAN-based release are tentative. At some point, this may be added to SMAC&rsquo;s package mirror for the install.</p>
<div id="installing-the-package-through-github-developmental" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#installing-the-package-through-github-developmental" class="anchor"> </a></body></html>Installing the package through GitHub (Developmental)</h2>
<p>For users who are interested in having the latest and greatest developments within time series, this option is ideal. Though, there is considerably more work that a user must do to have a stable version of the package. <strong>The setup to obtain the development version is platform dependent.</strong></p>
<p>Specifically, one <strong>must</strong> have a compiler installed on your system that is compatible with R.</p>
<p>For help on obtaining a compiler consult:</p>
<ul><li><a href="http://thecoatlessprofessor.com/programming/r-compiler-tools-for-rcpp-on-os-x/">OS X</a></li>
<li><a href="http://stat385.thecoatlessprofessor.com/announcements/2016/07/25/install-rtools-for-rcpp/">Windows</a></li>
</ul><p>Generally speaking, Linux users should have a compiler that is compatible with R already installed on their system.</p>
<p>With the system dependency taken care of, we continue on by installing the R specific package dependencies and finally the package itself by doing the following in an R session:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Install dependencies</span>
<span class="co"># install.packages("devtools")</span>

<span class="co"># Install the package from GitHub without Vignettes/User Guides</span>
devtools::<span class="kw">install_github</span>(<span class="st">"SMAC-Group/exts"</span>)

<span class="co"># Install the package from GitHub with Vignettes/User Guides</span>
<span class="co"># Note: This will be a longer install as the vignettes must be built.</span>
devtools::<span class="kw">install_github</span>(<span class="st">"SMAC-Group/exts"</span>, <span class="dt">build_vignettes =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="using-the-package" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#using-the-package" class="anchor"> </a></body></html>Using the package</h2>
<p>To use the package simply load it into R via:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"exts"</span>)</code></pre></div>
<p>Presently, <code>gmwm</code> and <code>magrittr</code> will autoload allowing you to access <code>ts.model</code>, <code>gts</code>, and the pipe (<code>%&gt;%</code>) operator.</p>
</div>
</div>
<div id="empirical-and-theoretical-racf-and-pacf" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#empirical-and-theoretical-racf-and-pacf" class="anchor"> </a></body></html>Empirical and Theoretical (R)ACF and PACF</h1>
<p>One of the key features of time series resolves around understanding the dependency that exists between observations using autocorrelation. There exists four built in functions that enable the computation of the (Robust) Autocorrelation Function [(R)ACF] and Partial Autocorrelation Function (PACF). These functions come in two flavors:</p>
<ol style="list-style-type: decimal"><li>empirical or sample-based via <code>emp_</code></li>
<li>theoretical ARMA processes via <code>theo_</code></li>
</ol><p>The prior function handles . The later is restricted to only analyzing autoregressive moving average processes through the <code>ARMA()</code> object found in <code>gmwm</code>.</p>
<p>To tell what kind of function was graphed, the graph heading will contain either &ldquo;Empirical&rdquo; or &ldquo;Theoretical&rdquo; along side the type of computation (e.g. (R)ACF or PACF).</p>
<div id="empirical-emp_-racf-and-pacf" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#empirical-emp_-racf-and-pacf" class="anchor"> </a></body></html>Empirical (<code>emp_</code>) (R)ACF and PACF</h2>
<p>Empirical graphs for (R)ACF and PACF are great for analyzing sample time series data to determine the dependency structure.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Set seed for reproducibility</span>
<span class="kw">set.seed</span>(<span class="dv">8672</span>)

<span class="co"># Generate an AR1</span>
xt =<span class="st"> </span><span class="kw">gen_gts</span>(<span class="dv">1000</span>, <span class="kw">AR1</span>(<span class="dt">phi =</span> <span class="fl">0.6</span>, <span class="dt">sigma2 =</span> <span class="dv">1</span>))

<span class="co"># Obtain the empirical ACF</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/emp_acf.html">emp_acf</a></span>(xt)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/acf_pacf-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Obtain the empirical RACF (Robust ACF)</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/emp_acf.html">emp_acf</a></span>(xt, <span class="dt">robust =</span> <span class="ot">TRUE</span>)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/acf_pacf-2.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Obtain the covariance</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/emp_acf.html">emp_acf</a></span>(xt, <span class="dt">type =</span> <span class="st">"covariance"</span>)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/acf_pacf-3.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Obtain the empirical PACF</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/emp_pacf.html">emp_pacf</a></span>(xt)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/acf_pacf-4.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Obtain both the empirical ACF &amp; PACF</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/emp_corr.html">emp_corr</a></span>(xt)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/acf_pacf-5.png" width="672"></p>
</div>
<div id="theoretical-theo_-acf-and-pacf-graphs-for-arma-models" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#theoretical-theo_-acf-and-pacf-graphs-for-arma-models" class="anchor"> </a></body></html>Theoretical (<code>theo_</code>) ACF and PACF graphs for ARMA Models</h2>
<p>Theoretical graphs for ACF and PACF are also available separately via <code><a href="../reference/theo_acf.html">theo_acf()</a></code> and <code><a href="../reference/theo_pacf.html">theo_pacf()</a></code> or combined into one via <code><a href="../reference/theo_corr.html">theo_corr()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model =<span class="st"> </span><span class="kw">ARMA</span>(<span class="dt">ar =</span> <span class="kw">c</span>(.<span class="dv">50</span>, -<span class="fl">0.25</span>), <span class="dt">ma =</span> .<span class="dv">20</span>)

<span class="co"># Theoretical ACF</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/theo_acf.html">theo_acf</a></span>(model)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/theo_arma_plots-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Theoretical PACF</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/theo_pacf.html">theo_pacf</a></span>(model)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/theo_arma_plots-2.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a theoretical graph</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/theo_corr.html">theo_corr</a></span>(model)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/theo_arma_plots-3.png" width="672"></p>
</div>
</div>
<div id="exploratory-data-analysis-eda-eda_" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#exploratory-data-analysis-eda-eda_" class="anchor"> </a></body></html>Exploratory Data Analysis [EDA] (<code>eda_()</code>)</h1>
<p>Exploratory Data Analysis allows for visually and quantitatively obtaining graphing information.</p>
<div id="observe-acf-and-pacf-graphs" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#observe-acf-and-pacf-graphs" class="anchor"> </a></body></html>Observe ACF and PACF Graphs</h2>
<p>Often times, it is helpful to observe the time series, ACF, and PACF graphs together. To do so, use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bring in time series data</span>
xt =<span class="st"> </span><span class="kw">gts</span>(<span class="kw">log</span>(lynx), <span class="dt">start =</span> <span class="dv">1821</span>, <span class="dt">freq =</span> <span class="dv">1</span>)

<span class="co"># Obtain Empirical ACF &amp; PACF alongside data</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/eda_ts.html">eda_ts</a></span>(xt)

<span class="co"># Graph Data, Empirical (R)ACF, and Empirical PACF</span>
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/eda_ts-1.png" width="768"></p>
</div>
<div id="compare-classical-and-robust-acf" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#compare-classical-and-robust-acf" class="anchor"> </a></body></html>Compare Classical and Robust ACF</h2>
<p>To observe difference between the classical and robust ACF, one can use <code><a href="../reference/compare_acf.html">compare_acf()</a></code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bring in time series data</span>
xt =<span class="st"> </span><span class="kw">gts</span>(<span class="kw">log</span>(lynx), <span class="dt">start =</span> <span class="dv">1821</span>, <span class="dt">freq =</span> <span class="dv">1</span>)

<span class="co"># Obtain the ACF values</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/compare_acf.html">compare_acf</a></span>(xt)

<span class="co"># Graph data</span>
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/compare_robust-1.png" width="768"></p>
</div>
<div id="data-transform-previews" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#data-transform-previews" class="anchor"> </a></body></html>Data Transform Previews</h2>
<p>Often times, it is helpful to transform the data to attempt to make the time series appear stationary.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Default transforms</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/eda_change.html">eda_change</a></span>(gnp)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/eda_change-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Default transforms but applied together in the second case</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/eda_change.html">eda_change</a></span>(gnp, <span class="dt">both =</span> <span class="ot">TRUE</span>)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/eda_change-2.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Different Transforms and applied separately in the second case</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/eda_change.html">eda_change</a></span>(gnp, <span class="dt">t1 =</span> sqrt, <span class="dt">t2 =</span> log10)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/eda_change-3.png" width="672"></p>
</div>
</div>
<div id="diagnostic-functions" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#diagnostic-functions" class="anchor"> </a></body></html>Diagnostic Functions</h1>
<p>The style for diagnostic features has all functions being prefixed by <code>diag_</code>. Each function has its own graphing utility that can be called with either <code>autoplot</code> or <code>plot</code> as before.</p>
<div id="residual-extraction-and-standardization-diag_resid" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#residual-extraction-and-standardization-diag_resid" class="anchor"> </a></body></html>Residual extraction and standardization (<code>diag_resid</code>)</h2>
<p>Residuals are able to be extract from <code>arima</code> and <code>lm</code> classes in addition to manipulated to be standardized via <code>resid / sd(resid)</code> through a <code>std = TRUE</code> flag.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Extract and standardize residuals</span>
model =<span class="st"> </span><span class="kw">arima</span>(sunspot.year, <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">0</span>))
resids =<span class="st"> </span><span class="kw"><a href="../reference/diag_resid.html">diag_resid</a></span>(model, <span class="dt">std =</span> <span class="ot">TRUE</span>)

<span class="co"># Graph Histogram</span>
<span class="kw">autoplot</span>(resids, <span class="dt">type =</span> <span class="st">"hist"</span>)</code></pre></div>
<p><img src="ts_features_files/figure-html/residual_plots-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Graph Histogram</span>
<span class="kw">autoplot</span>(resids, <span class="dt">type =</span> <span class="st">"resid"</span>)</code></pre></div>
<p><img src="ts_features_files/figure-html/residual_plots-2.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Graph Histogram</span>
<span class="kw">autoplot</span>(resids, <span class="dt">type =</span> <span class="st">"both"</span>)</code></pre></div>
<p><img src="ts_features_files/figure-html/residual_plots-3.png" width="672"></p>
</div>
<div id="quantile-quantile-normal-plot-diag_qq" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#quantile-quantile-normal-plot-diag_qq" class="anchor"> </a></body></html>Quantile-Quantile Normal Plot (<code>diag_qq</code>)</h2>
<p>The <code>diag_qq</code> plot creates a quantil-quantile plot that contains a fitted normal line. Typically, this plot is used to evaluate the residuals of a model.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Observing residuals of an Arima process</span>
model =<span class="st"> </span><span class="kw">arima</span>(sunspot.year, <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">0</span>))
vals =<span class="st"> </span><span class="kw"><a href="../reference/diag_qq.html">diag_qq</a></span>(model, <span class="dt">std =</span> <span class="ot">TRUE</span>)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/qq_plot-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Observe time series</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/diag_qq.html">diag_qq</a></span>(sunspot.year, <span class="dt">std =</span> <span class="ot">TRUE</span>)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/qq_plot-2.png" width="672"></p>
</div>
<div id="wavelet-variance-wv-estimate-of-white-noise-diag_wv" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#wavelet-variance-wv-estimate-of-white-noise-diag_wv" class="anchor"> </a></body></html>Wavelet Variance (WV) Estimate of White Noise (<code>diag_wv</code>)</h2>
<p>Wavelet Variance provides an estimation technique to display whether the observed process is a White Noise. If the orange line follows the dark blue line closely or remains within the blue confidence interval, then the process is likely to be a white noise.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># White Noise Process</span>
model =<span class="st"> </span><span class="kw">arima</span>(sunspot.year, <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">0</span>))
vals =<span class="st"> </span><span class="kw"><a href="../reference/diag_wv.html">diag_wv</a></span>(model)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/wv_plot-1.png" width="672"></p>
</div>
<div id="portmanteau-tests" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#portmanteau-tests" class="anchor"> </a></body></html>Portmanteau Tests</h2>
<p>The package provides a convient wrapper into <em>R</em>&lsquo;s <code>Box.test()</code> function that separates the different tests, &rsquo;Ljung-Box&rsquo; and &lsquo;Box-Pierce&rsquo;, to assess the null hypothesis of independence in a given time series. The function makes available a <code>data.frame</code> containing: <code>lag</code>, <code>p_value</code>, <code>statistic</code> for each of the tests run that can then be used to achieve a diagnostic plot like so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Ljung-Box test</span>
model =<span class="st"> </span><span class="kw">arima</span>(sunspot.year, <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">0</span>))
vals =<span class="st"> </span><span class="kw"><a href="../reference/diag_ljungbox.html">diag_ljungbox</a></span>(model)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/portmanteau_test-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Box-Pierce Test</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/diag_boxpierce.html">diag_boxpierce</a></span>(model)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/portmanteau_test-2.png" width="672"></p>
</div>
<div id="residual-vs-fitted-values-developmental" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#residual-vs-fitted-values-developmental" class="anchor"> </a></body></html>Residual vs.&nbsp;Fitted Values (Developmental)</h2>
<p><strong>Warning: The inputs for this function will change.</strong></p>
<p>One further useful plot is to compare the residuals to the fitted values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">xt =<span class="st"> </span>sunspot.year
model =<span class="st"> </span><span class="kw">arima</span>(xt, <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">0</span>))

<span class="co"># Note additional manipulation is required outside the function</span>
<span class="co"># to obtain the two parameters are required</span>
resids =<span class="st"> </span><span class="kw">resid</span>(model)
fit =<span class="st"> </span>xt -<span class="st"> </span>resids

vals =<span class="st"> </span><span class="kw"><a href="../reference/diag_fitted.html">diag_fitted</a></span>(fit, resids)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/fitted_residual-1.png" width="672"></p>
</div>
<div id="master-diagnostic-plot-developmental" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#master-diagnostic-plot-developmental" class="anchor"> </a></body></html>Master Diagnostic Plot (Developmental)</h2>
<p><strong>Warning: This function will change in the future to adhere more to a chained argument</strong></p>
<p>Each of the diagnostic plots are available standalone. However, there is benefits to plotting all of the diagnostic information simultaneously. Hence, the <code><a href="../reference/diag_ts.html">diag_ts()</a></code> function that will calculate all of the above values and provide a diagnostic plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Observing residuals of an Arima process</span>
xt =<span class="st"> </span>sunspot.year
model =<span class="st"> </span><span class="kw">arima</span>(xt, <span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">0</span>))

<span class="co"># Note two parameters are required</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/diag_ts.html">diag_ts</a></span>(model, xt)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/diag_ts-1.png" width="768"></p>
</div>
</div>
<div id="selecting-an-appropriate-time-series-model" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#selecting-an-appropriate-time-series-model" class="anchor"> </a></body></html>Selecting an appropriate time series model</h1>
<p>There are many ways to go about selecting an ideal time series model. Within the package there are <code><a href="../reference/select_arima.html">select_arima()</a></code>, <code><a href="../reference/select_arima.html">select_arma()</a></code>, <code><a href="../reference/select_arima.html">select_ar()</a></code>, and <code><a href="../reference/select_arima.html">select_ma()</a></code> functions that build all of the time series models alongside multiple Information Criterion (IC) such as:</p>
<ul><li>Akaike information criterion (AIC): <span class="math inline">\(AIC = - 2{L_{\max }} + 2k\)</span></li>
<li>Bayesian information criterion (BIC): <span class="math inline">\(BIC = - 2{L_{\max }} + klog(n)\)</span></li>
<li>Hannan&ndash;Quinn information (HQC): <span class="math inline">\(HQC = - 2{L_{\max }} + 2k\log \left( {\log \left( n \right)} \right)\)</span>.</li>
</ul><p>where <span class="math inline">\(L_{\max }\)</span> is the log-likelihood, <span class="math inline">\(k\)</span> is the number of parameters, and <span class="math inline">\(n\)</span> is sample size.</p>
<p>To acess the best model according to one of the criteria, use: <code><a href="../reference/best_model.html">best_model(x, ic="aic")</a></code></p>
<div id="selecting-one-dimension-select_ar-and-select_ma" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#selecting-one-dimension-select_ar-and-select_ma" class="anchor"> </a></body></html>Selecting one dimension <code><a href="../reference/select_arima.html">select_ar()</a></code> and <code><a href="../reference/select_arima.html">select_ma()</a></code></h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bring in time series data</span>
xt =<span class="st"> </span><span class="kw">gts</span>(<span class="kw">diff</span>(<span class="kw">log</span>(gnp)), <span class="dt">start =</span> <span class="dv">1700</span>, <span class="dt">freq =</span> <span class="dv">1</span>)
model_info =<span class="st"> </span><span class="kw"><a href="../reference/select_arima.html">select_ar</a></span>(xt, <span class="dt">p.min =</span> <span class="dv">1</span>, <span class="dt">p.max =</span> <span class="dv">8</span>)

<span class="co"># Obtain a plot of the model selection criteria</span>
<span class="kw">autoplot</span>(model_info)</code></pre></div>
<p><img src="ts_features_files/figure-html/unnamed-chunk-2-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Obtain the best model (AIC is default)</span>
<span class="kw"><a href="../reference/best_model.html">best_model</a></span>(model_info)</code></pre></div>
<pre><code>## 
## Call:
## arima(x = xt, order = c(4, 0, 0), include.mean = include.mean)
## 
## Coefficients:
##          ar1     ar2      ar3      ar4  intercept
##       0.3141  0.1318  -0.0719  -0.1159     0.0083
## s.e.  0.0665  0.0698   0.0697   0.0664     0.0008
## 
## sigma^2 estimated as 8.735e-05:  log likelihood = 722.24,  aic = -1432.47</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Obtain the best model with BIC</span>
bmodel =<span class="st"> </span><span class="kw"><a href="../reference/best_model.html">best_model</a></span>(model_info, <span class="dt">ic =</span> <span class="st">"bic"</span>)

bmodel</code></pre></div>
<pre><code>## 
## Call:
## arima(x = xt, order = c(1, 0, 0), include.mean = include.mean)
## 
## Coefficients:
##          ar1  intercept
##       0.3467     0.0083
## s.e.  0.0627     0.0010
## 
## sigma^2 estimated as 9.03e-05:  log likelihood = 718.61,  aic = -1431.22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># See the ACF of the residuals for the model</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/emp_corr.html">emp_corr</a></span>(bmodel)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/unnamed-chunk-2-2.png" width="672"></p>
</div>
<div id="selecting-multiple-dimensions-select_arima-and-select_arma" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#selecting-multiple-dimensions-select_arima-and-select_arma" class="anchor"> </a></body></html>Selecting multiple dimensions <code><a href="../reference/select_arima.html">select_arima()</a></code> and <code><a href="../reference/select_arima.html">select_arma()</a></code></h2>
<p><strong>Warning: These procedures have been known to have issues with the initial range of parameters to attempt. You may wish to change default <code>*.min</code> and <code>*.max</code> when applicable. At a later time, support for functional errors should resolve this issue.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bring in time series data</span>
xt =<span class="st"> </span><span class="kw">gts</span>(<span class="kw">diff</span>(<span class="kw">log</span>(gnp)), <span class="dt">start =</span> <span class="dv">1700</span>, <span class="dt">freq =</span> <span class="dv">1</span>)
model_info =<span class="st"> </span><span class="kw"><a href="../reference/select_arima.html">select_arma</a></span>(xt, <span class="dt">p.max =</span> <span class="dv">4</span>, <span class="dt">q.max =</span> <span class="dv">3</span>)

<span class="co"># Obtain a plot of the model selection criteria</span>
<span class="kw">autoplot</span>(model_info)</code></pre></div>
<p><img src="ts_features_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Obtain the best model (AIC is default)</span>
<span class="kw"><a href="../reference/best_model.html">best_model</a></span>(model_info)</code></pre></div>
<pre><code>## 
## Call:
## arima(x = xt, order = c(3, 0, 2), include.mean = include.mean)
## 
## Coefficients:
##          ar1      ar2     ar3      ma1     ma2  intercept
##       1.6742  -1.3104  0.2351  -1.4045  1.0000     0.0083
## s.e.  0.0666   0.0974  0.0656   0.0196  0.0234     0.0009
## 
## sigma^2 estimated as 8.22e-05:  log likelihood = 726.62,  aic = -1439.25</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Obtain the best model with BIC</span>
bmodel =<span class="st"> </span><span class="kw"><a href="../reference/best_model.html">best_model</a></span>(model_info, <span class="dt">ic =</span> <span class="st">"bic"</span>)

bmodel</code></pre></div>
<pre><code>## 
## Call:
## arima(x = xt, order = c(1, 0, 0), include.mean = include.mean)
## 
## Coefficients:
##          ar1  intercept
##       0.3467     0.0083
## s.e.  0.0627     0.0010
## 
## sigma^2 estimated as 9.03e-05:  log likelihood = 718.61,  aic = -1431.22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># See the ACF of the residuals for the model</span>
vals =<span class="st"> </span><span class="kw"><a href="../reference/emp_corr.html">emp_corr</a></span>(bmodel)
<span class="kw">autoplot</span>(vals)</code></pre></div>
<p><img src="ts_features_files/figure-html/unnamed-chunk-3-2.png" width="672"></p>
</div>
</div>
<div id="forecasting-abilities" class="section level1">
<h1 class="hasAnchor"><html><body><a href="#forecasting-abilities" class="anchor"> </a></body></html>Forecasting Abilities</h1>
<div id="other-packages" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#other-packages" class="anchor"> </a></body></html>Other Packages</h2>
<p>The textbook &ldquo;Time Series Analysis and Its Applications: With Examples in R&rdquo; (ASTSA) provides the <code>astsa</code> package. This package is able to provide better forecasting when it comes to model fitting temporarily. The code below is found on page 165 of the ASTSA text.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"astsa"</span>)
pred =<span class="st"> </span><span class="kw">sarima.for</span>(prodn, <span class="dv">12</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">12</span>) <span class="co"># forecast</span></code></pre></div>
<p><img src="ts_features_files/figure-html/other_package-1.png" width="672"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked"><li><a href="#introduction">Introduction</a><ul class="nav nav-pills nav-stacked"><li><a href="#pipable-time-series-functions">Pipable Time Series Functions</a></li>
      </ul></li>
      <li><a href="#installation-instructions">Installation Instructions</a><ul class="nav nav-pills nav-stacked"><li><a href="#installing-the-package-through-github-developmental">Installing the package through GitHub (Developmental)</a></li>
      <li><a href="#using-the-package">Using the package</a></li>
      </ul></li>
      <li><a href="#empirical-and-theoretical-racf-and-pacf">Empirical and Theoretical (R)ACF and PACF</a><ul class="nav nav-pills nav-stacked"><li><a href="#empirical-emp_-racf-and-pacf">Empirical (<code>emp_</code>) (R)ACF and PACF</a></li>
      <li><a href="#theoretical-theo_-acf-and-pacf-graphs-for-arma-models">Theoretical (<code>theo_</code>) ACF and PACF graphs for ARMA Models</a></li>
      </ul></li>
      <li><a href="#exploratory-data-analysis-eda-eda_">Exploratory Data Analysis [EDA] (<code>eda_()</code>)</a><ul class="nav nav-pills nav-stacked"><li><a href="#observe-acf-and-pacf-graphs">Observe ACF and PACF Graphs</a></li>
      <li><a href="#compare-classical-and-robust-acf">Compare Classical and Robust ACF</a></li>
      <li><a href="#data-transform-previews">Data Transform Previews</a></li>
      </ul></li>
      <li><a href="#diagnostic-functions">Diagnostic Functions</a><ul class="nav nav-pills nav-stacked"><li><a href="#residual-extraction-and-standardization-diag_resid">Residual extraction and standardization (<code>diag_resid</code>)</a></li>
      <li><a href="#quantile-quantile-normal-plot-diag_qq">Quantile-Quantile Normal Plot (<code>diag_qq</code>)</a></li>
      <li><a href="#wavelet-variance-wv-estimate-of-white-noise-diag_wv">Wavelet Variance (WV) Estimate of White Noise (<code>diag_wv</code>)</a></li>
      <li><a href="#portmanteau-tests">Portmanteau Tests</a></li>
      <li><a href="#residual-vs.fitted-values-developmental">Residual vs.&nbsp;Fitted Values (Developmental)</a></li>
      <li><a href="#master-diagnostic-plot-developmental">Master Diagnostic Plot (Developmental)</a></li>
      </ul></li>
      <li><a href="#selecting-an-appropriate-time-series-model">Selecting an appropriate time series model</a><ul class="nav nav-pills nav-stacked"><li><a href="#selecting-one-dimension-select_ar-and-select_ma">Selecting one dimension <code><a href="../reference/select_arima.html">select_ar()</a></code> and <code><a href="../reference/select_arima.html">select_ma()</a></code></a></li>
      <li><a href="#selecting-multiple-dimensions-select_arima-and-select_arma">Selecting multiple dimensions <code><a href="../reference/select_arima.html">select_arima()</a></code> and <code><a href="../reference/select_arima.html">select_arma()</a></code></a></li>
      </ul></li>
      <li><a href="#forecasting-abilities">Forecasting Abilities</a><ul class="nav nav-pills nav-stacked"><li><a href="#other-packages">Other Packages</a></li>
      </ul></li>
      </ul></div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by James Balamuta, Stephane Guerrier.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer></div>

  </body></html>
